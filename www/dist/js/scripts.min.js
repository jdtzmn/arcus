var lock=null,validToken=!1,auth0={get:function(e){$.ajax({url:"/api/get",beforeSend:function(e){e.setRequestHeader("Authorization","Bearer "+localStorage.getItem("userToken"))}}).done(function(t){e(t)})},update:function(e,t){$.ajax({url:"/api/update?body="+JSON.stringify({servers:e}),beforeSend:function(e){e.setRequestHeader("Authorization","Bearer "+localStorage.getItem("userToken"))}}).done(function(e){t(e)})},add:function(e,t,o){auth0.get(function(n){var r=n.body.servers;r.push({name:e,ip:t}),auth0.update(r,function(e){e.success===!0?o(e):console.log(new Error(e.statusCode,e.body))})})},remove:function(e,t){auth0.get(function(o){var n=o.body.servers;if("string"==typeof e)for(var r=0;r<n.length;r++)n[r].name===e&&n.splice(r,1);else"number"==typeof e&&n.splice(e,1);auth0.update(n,function(e){e.success===!0?t(e):console.log(new Error(e.statusCode,e.body))})})}};$(document).ready(function(){null!==window.localStorage.getItem("userToken")?($.ajax({url:"https://arcus.auth0.com/userinfo",beforeSend:function(e){e.setRequestHeader("Authorization","Bearer "+localStorage.getItem("userToken"))}}).done(function(e){validToken=!0,$(".login-span").stop().hide(0).text("Logout").fadeIn(),$(".login-span-sm").stop().hide(0).text(", Logout").fadeIn(),$(".user").stop().hide(0).text("Signed in as: "+e.phone_number).fadeIn(),$(".login").not(".login-sm").removeClass("btn-primary"),$(".login").not(".login-sm").addClass("btn-default")}).fail(function(){window.localStorage.removeItem("userToken"),servers.render()}),auth0.get(function(e){window.localStorage.setItem("servers",JSON.stringify(e.body.servers)),servers.render()})):servers.render(),$(".login").click(function(){return"Logout"===$(".login").text()||", Logout"===$(".login-sm").text()?(window.localStorage.removeItem("userToken"),window.localStorage.removeItem("smsCred"),void window.location.replace("/")):(lock=new Auth0LockPasswordless("qB53zH4XKon2YWheT9dXixXjyvEoy0Sq","arcus.auth0.com"),void lock.sms({callbackURL:"",authParams:{scope:"openid profile"},autoclose:!0},function(e,t,o,n,r,i){e||(window.localStorage.setItem("userToken",n),window.location.replace("/"))}))})}),$(document).ready(function(){$(".add").popover({html:!0,placement:"bottom",trigger:"manual",container:"body",content:function(){return $("#popover-content").html()}}),$(".add-text").popover({html:!0,placement:"bottom",trigger:"manual",content:function(){return $("#popover-content").html()}}),$(".add, .remove").keyup(function(e){32==e.keyCode&&$(this).click()}),$(".add, .add-text").click(function(){$(this).blur(),$(".cancel:visible").animate({width:"hide"}),$(this).popover("toggle"),$(".popover").find("#name").focus(),$(".add-server").click(function(e){return""===$(".popover").find("#name").val()&&($(".popover").find("#name").addClass("animated shake"),$(".popover").find("#name").parent().parent().addClass("has-error"),setTimeout(function(){$(".popover").find("#name").removeClass("animated shake")},1e3)),""===$(".popover").find("#ip").val()?($(".popover").find("#ip").addClass("animated shake"),$(".popover").find("#ip").parent().parent().addClass("has-error"),setTimeout(function(){$(".popover").find("#ip").removeClass("animated shake")},1e3)):""!==$(".popover").find("#ip").val()&&""!==$(".popover").find("#name").val()&&(servers.add($(".popover").find("#name").val(),$(".popover").find("#ip").val()),$(this).parents(".popover").popover("hide"),$(".navbar-collapse").collapse("hide"),servers.render()),!1}),$(".add-server").mouseup(function(e){return e.preventDefault(),!1}),$(".cancel-popover").click(function(){$(".cancel-popover:visible").parents(".popover").popover("hide")})}),$(".remove").click(function(e){$(this).blur(),$(".cancel").animate({width:"toggle"}),e.stopPropagation()}),$(document).click(function(){$(".cancel:visible").animate({width:"hide"})}),$(".delete").click(function(e){servers.remove($("tbody > tr").index($(this).parents("tr"))),servers.render(),e.stopPropagation()});var e={},t="";$(document).keydown(function(o){e[String.fromCharCode(o.keyCode)]||(e[String.fromCharCode(o.keyCode)]=!0,27===o.keyCode&&($(".cancel:visible").animate({width:"hide"}),$(".cancel-popover:visible").parents(".popover").popover("hide")),!e.R||isNaN(String.fromCharCode(o.keyCode))||$("input").is(":focus")||(t+=String.fromCharCode(o.keyCode)),78!==o.keyCode||$("input").is(":focus")||($(".add").click(),o.preventDefault()))}),$(document).keyup(function(o){return"R"!==String.fromCharCode(o.keyCode)||""===t||$("input").is(":focus")?(82!==o.keyCode||$("input").is(":focus")||$(".cancel").animate({width:"toggle"}),void(e[String.fromCharCode(o.keyCode)]=!1)):(servers.remove(+t-1),servers.render(),void(t=""))}),$(".navbar-collapse .remove, .login-sm").click("li",function(){$(".navbar-collapse").collapse("hide")})}),!function(e){"use strict";var t=function(t,o){this.el=e(t),this.options=e.extend({},e.fn.typed.defaults,o),this.text=this.el.text(),this.typeSpeed=this.options.typeSpeed,this.startDelay=this.options.startDelay,this.backDelay=this.options.backDelay,this.strings=this.options.strings,this.strPos=0,this.arrayPos=0,this.string=this.strings[this.arrayPos],this.stopNum=0,this.loop=this.options.loop,this.loopCount=this.options.loopCount,this.curLoop=1,this.loop===!1?this.stopArray=this.strings.length-1:this.stopArray=this.strings.length,this.build()};t.prototype={constructor:t,init:function(){var e=this;setTimeout(function(){e.typewrite(e.string,e.strPos)},e.startDelay)},build:function(){this.init()},typewrite:function(e,t){var o=Math.round(70*Math.random())+this.typeSpeed,n=this;setTimeout(function(){if(n.arrayPos<n.strings.length){if(n.el.attr("placeholder",e.substr(0,t)),t>e.length&&n.arrayPos<n.stopArray){clearTimeout(o);var o=setTimeout(function(){n.backspace(e,t)},n.backDelay)}else if(t++,n.typewrite(e,t),n.loop===!1&&n.arrayPos===n.stopArray&&t===e.length){var o=n.options.callback();clearTimeout(o)}}else n.loop===!0&&n.loopCount===!1?(n.arrayPos=0,n.init()):n.loopCount!==!1&&n.curLoop<n.loopCount&&(n.arrayPos=0,n.curLoop=n.curLoop+1,n.init())},o)},backspace:function(e,t){var o=Math.round(70*Math.random())+this.typeSpeed,n=this;setTimeout(function(){if(n.el.attr("placeholder",e.substr(0,t)),t>n.stopNum)t--,n.backspace(e,t);else if(t<=n.stopNum){clearTimeout(o);var o=n.arrayPos=n.arrayPos+1;n.typewrite(n.strings[n.arrayPos],t)}},o)}},e.fn.typed=function(o){return this.each(function(){var n=e(this),r=n.data("typed"),i="object"==typeof o&&o;r||n.data("typed",r=new t(this,i)),"string"==typeof o&&r[o]()})},e.fn.typed.defaults={strings:["These are the default values...","You know what you should do?","Use your own!","Have a great day!"],typeSpeed:0,startDelay:0,backDelay:500,loop:!1,loopCount:!1,callback:function(){}}}(window.jQuery);var watching,servers={get:function(){var e=JSON.parse(window.localStorage.getItem("servers"))||[];return e},add:function(e,t){validToken&&auth0.add(e,t,function(){auth0.get(function(e){window.localStorage.setItem("servers",JSON.stringify(e.body.servers)),servers.render()})});var o=servers.get();return o.push({name:e,ip:t}),window.localStorage.setItem("servers",JSON.stringify(o)),o},remove:function(e){validToken&&auth0.remove(e,function(){auth0.get(function(e){window.localStorage.setItem("servers",JSON.stringify(e.body.servers)),servers.render()})});var t=servers.get();if("string"==typeof e){for(var o=0;o<t.length;o++)if(t[o].name===e)return t.splice(o,1),window.localStorage.setItem("servers",JSON.stringify(t)),t}else if("number"==typeof e)return t.splice(e,1),window.localStorage.setItem("servers",JSON.stringify(t)),t},render:function(){servers.get().length>0?($(".nothing").hide(),$(".data").fadeIn(),$(".servers").hide().render(servers.get(),{cancel:{style:function(){return"display: none"}}}).fadeIn()):0===servers.get().length&&($(".data").hide(),$(".nothing").fadeIn()),servers.watch()},watch:function(){mcstatus(servers.get(),function(e){e instanceof Error?console.log(e):servers.notify(e)}),clearInterval(watching),watching=setInterval(function(){mcstatus(servers.get(),function(e){e instanceof Error?console.log(e):servers.notify(e)})},5e3)},notify:function(e){if(PNotify.prototype.options.styling="fontawesome",PNotify.desktop.permission(),validToken){var t=new Date,o="["+(t.getMonth()+1)+"/"+t.getDate()+"/"+t.getFullYear()+" @ "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()+"]%0a ";$.ajax({url:"/api/notify?msg="+o+e,beforeSend:function(e){e.setRequestHeader("Authorization","Bearer "+localStorage.getItem("userToken"))}}).done(function(t){new PNotify({title:"Arcus",text:e,type:"info",icon:!1,mouse_reset:!1,desktop:{desktop:!0,icon:!1},mobile:{swipe_dismiss:!0,styling:!0}})})}else new PNotify({title:"Arcus",text:e,type:"info",icon:!1,mouse_reset:!1,desktop:{desktop:!0,icon:!1},mobile:{swipe_dismiss:!0,styling:!0}})}};
//# sourceMappingURL=scripts.min.js.map
